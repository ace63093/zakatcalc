{% extends "base.html" %}

{% block title %}Zakat Calculator - Calculate Your Islamic Wealth Tax{% endblock %}

{% block content %}
<div class="container">
    <h1>Zakat Calculator</h1>
    <p class="subtitle">Calculate your Islamic wealth obligation (2.5%)</p>

    <div class="info-box">
        <p><strong>Nisab Threshold:</strong> Zakat is obligatory when your wealth exceeds the Nisab
        (equivalent to 85g of gold or 595g of silver). Enter your assets below to calculate.</p>
    </div>

    <form id="zakatForm">
        <div class="form-group">
            <label for="masterCurrency">Master Currency</label>
            <select id="masterCurrency" name="masterCurrency">
                <option value="CAD" selected>CAD - Canadian Dollar</option>
                <option value="USD">USD - US Dollar</option>
                <option value="BDT">BDT - Bangladeshi Taka</option>
            </select>
            <p class="hint">All values will be converted to this currency</p>
        </div>

        <div class="section-title">Gold Assets</div>
        <div id="goldItems">
            <div class="asset-row" data-type="gold">
                <input type="text" name="gold_name" placeholder="Name (e.g., Ring)" class="input-name">
                <input type="number" name="gold_weight" step="0.01" min="0" placeholder="Weight (g)" class="input-weight">
                <select name="gold_karat" class="input-karat">
                    <option value="24">24K</option>
                    <option value="22" selected>22K</option>
                    <option value="21">21K</option>
                    <option value="18">18K</option>
                    <option value="14">14K</option>
                    <option value="10">10K</option>
                    <option value="9">9K</option>
                </select>
                <button type="button" class="btn-remove" onclick="removeRow(this)">X</button>
            </div>
        </div>
        <button type="button" class="btn-add" onclick="addGoldRow()">+ Add Gold Item</button>

        <div class="section-title">Cash on Hand</div>
        <div id="cashItems">
            <div class="asset-row" data-type="cash">
                <input type="text" name="cash_name" placeholder="Name (e.g., Wallet)" class="input-name">
                <input type="number" name="cash_amount" step="0.01" min="0" placeholder="Amount" class="input-amount">
                <select name="cash_currency" class="input-currency">
                    <option value="CAD" selected>CAD</option>
                    <option value="USD">USD</option>
                    <option value="BDT">BDT</option>
                </select>
                <button type="button" class="btn-remove" onclick="removeRow(this)">X</button>
            </div>
        </div>
        <button type="button" class="btn-add" onclick="addCashRow()">+ Add Cash Item</button>

        <div class="section-title">Bank Accounts</div>
        <div id="bankItems">
            <div class="asset-row" data-type="bank">
                <input type="text" name="bank_name" placeholder="Name (e.g., Savings)" class="input-name">
                <input type="number" name="bank_amount" step="0.01" min="0" placeholder="Amount" class="input-amount">
                <select name="bank_currency" class="input-currency">
                    <option value="CAD" selected>CAD</option>
                    <option value="USD">USD</option>
                    <option value="BDT">BDT</option>
                </select>
                <button type="button" class="btn-remove" onclick="removeRow(this)">X</button>
            </div>
        </div>
        <button type="button" class="btn-add" onclick="addBankRow()">+ Add Bank Account</button>

        <button type="submit">Calculate Zakat</button>
    </form>

    <div id="result" class="result">
        <div class="result-row">
            <span class="result-label">Gold Total</span>
            <span class="result-value" id="goldTotal">$0.00</span>
        </div>
        <div class="result-row">
            <span class="result-label">Cash Total</span>
            <span class="result-value" id="cashTotal">$0.00</span>
        </div>
        <div class="result-row">
            <span class="result-label">Bank Total</span>
            <span class="result-value" id="bankTotal">$0.00</span>
        </div>
        <div class="result-row">
            <span class="result-label">Grand Total</span>
            <span class="result-value" id="grandTotal">$0.00</span>
        </div>
        <div class="result-row">
            <span class="result-label">Nisab Threshold (85g Gold)</span>
            <span class="result-value" id="nisabThreshold">$0.00</span>
        </div>
        <div class="result-row">
            <span class="result-label">Above Nisab</span>
            <span class="result-value" id="aboveNisab">-</span>
        </div>
        <div class="result-row">
            <span class="result-label">Zakat Due (2.5%)</span>
            <span class="result-value zakat-due" id="zakatDue">$0.00</span>
        </div>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script src="{{ url_for('static', filename='js/calculator.js') }}"></script>
{% endblock %}
